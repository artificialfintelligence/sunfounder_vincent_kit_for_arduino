

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>2.24 MPR121 Module &mdash; SunFounder Vincent Kit  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2.25 Rotary Encoder Module" href="2.25_rotary_encoder_module.html" />
    <link rel="prev" title="2.23 Joystick Module" href="2.23_joystick_module.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SunFounder Vincent Kit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="components_list.html">Components list</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introductin</a></li>
<li class="toctree-l1"><a class="reference internal" href="part_1_basic.html">Part 1 Basic</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="part_2_component.html">Part 2 Component</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="2.1_acommon_component.html">2.1 Common Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2_led.html">2.2 LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3_rgb_led.html">2.3 RGB LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.4_led_bar_graph.html">2.4 LED Bar Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.5_7-segment_display.html">2.5 7-Segment Display</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.6_74hc595.html">2.6 74HC595</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.7_4-digital_7-segment_display.html">2.7 4-Digital 7-Segment Display</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.8_led_matrix_module.html">2.8 LED Matrix Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.9_i2c_lcd1602_module.html">2.9 I2C LCD1602 Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.10_active_buzzer.html">2.10 Active Buzzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.11_passive_buzzer.html">2.11 Passive Buzzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.12_servo.html">2.12 Servo</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.13_motor.html">2.13 Motor</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.14_stepper_motor.html">2.14 Stepper Motor</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.15_button.html">2.15 Button</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.16_slide_switch.html">2.16 Slide Switch</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.17_tilt_switch.html">2.17 Tilt Switch</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.18_touch_switch_module.html">2.18 Touch Switch Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.19_keypad.html">2.19 Keypad</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.20_ir_receiver_module.html">2.20 IR Receiver Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.21_relay_module.html">2.21 Relay Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.22_potentiometer.html">2.22 Potentiometer</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.23_joystick_module.html">2.23 Joystick Module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.24 MPR121 Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview"><strong>Overview</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#components-required"><strong>Components Required</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#electrodes"><strong>Electrodes</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fritzing-circuit"><strong>Fritzing Circuit</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#schematic-diagram"><strong>Schematic Diagram</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#code"><strong>Code</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-analysis"><strong>Code Analysis</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#library-functions"><strong>Library Functions：</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#phenomenon-picture"><strong>Phenomenon Picture</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="2.25_rotary_encoder_module.html">2.25 Rotary Encoder Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.26_photoresistor.html">2.26 Photoresistor</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.27_thermistor.html">2.27 Thermistor</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.28_sound_sensor_module.html">2.28 Sound Sensor Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.29_water_sensor_module.html">2.29 Water Sensor Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.30_ir_obstacle_avoidance_sensor.html">2.30 IR Obstacle Avoidance Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.31_pir_module.html">2.31 PIR Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.32_dht11_module.html">2.32 DHT11 Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.33_ultrasonic_module.html">2.33 Ultrasonic Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.34_mpu6050_module.html">2.34 MPU6050 Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.35_rfid-rc522_module.html">2.35 RFID-RC522 Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="part_3_example.html">Part 3 example</a></li>
<li class="toctree-l1"><a class="reference internal" href="part_4_appendix.html">Part 4 Appendix</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SunFounder Vincent Kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="part_2_component.html">Part 2 Component</a> &raquo;</li>
        
      <li>2.24 MPR121 Module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/2.24_mpr121_module.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="mpr121-module">
<h1>2.24 MPR121 Module<a class="headerlink" href="#mpr121-module" title="Permalink to this headline">¶</a></h1>
<section id="overview">
<h2><strong>Overview</strong><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>In this lesson, you will learn how to use MPR121. It’s a good option
when you want to add a lot of touch switches to your project. The
electrode of MPR121 can be extended with a conductor. If you connect a
wire to a banana, you can turn the banana into a touch switch, thus
realizing projects such as fruit piano.</p>
</section>
<section id="components-required">
<h2><strong>Components Required</strong><a class="headerlink" href="#components-required" title="Permalink to this headline">¶</a></h2>
<img alt="_images/Part_two_24.png" src="_images/Part_two_24.png" />
<p><strong>Component Introduction</strong></p>
<a class="reference internal image-reference" href="_images/image200.jpeg"><img alt="_images/image200.jpeg" class="align-center" src="_images/image200.jpeg" style="width: 300px;" /></a>
<p>Add lots of touch sensors to your next project with this easy-to-use
12-channel capacitive touch sensor breakout board, starring the MPR121.
This chip can handle up to 12 individual touch pads.</p>
<p>The MPR121 has support for only I2C, which can be implemented with
nearly any microcontroller. You can select one of 4 addresses with the
ADDR pin, for a total of 48 capacitive touch pads on one I2C 2-wire bus.
Using this chip is a lot easier than doing the capacitive sensing with
analog inputs: it handles all the filtering for you and can be
configured for more/less sensitivity.</p>
<p>When the MPR121 senses a change, it pulls an interrupt pin LOW. The
control board going to check that pin to see if it is LOW during the
loop. To do this, this sensor also needs access to another digital pin.</p>
</section>
<section id="electrodes">
<h2><strong>Electrodes</strong><a class="headerlink" href="#electrodes" title="Permalink to this headline">¶</a></h2>
<p>Electrode is a touch sensor. Typically, electrodes can just be some
piece of metal, or a wire. But some times depending on the length of our
wire, or the material the electrode is on, it can make triggering the
sensor difficult. For this reason, the MPR121 allows you to configure
what is needed to trigger and untrigger an electrode.</p>
</section>
<section id="fritzing-circuit">
<h2><strong>Fritzing Circuit</strong><a class="headerlink" href="#fritzing-circuit" title="Permalink to this headline">¶</a></h2>
<p>In this example, we insert MPR121 into the breadboard. Get the GND of
MPR121 connected to GND, 3.3V to 3V3, IRQ to the digital pin 2, SCL to
the pin SCL(21), and SDA to the pin SDA(20). There are 12 electrodes for
touch sensing. Note: MPR121 is powered by 3.3V, not 5V.</p>
<a class="reference internal image-reference" href="_images/image201.png"><img alt="_images/image201.png" class="align-center" src="_images/image201.png" style="width: 5.15208in; height: 4.63125in;" /></a>
</section>
<section id="schematic-diagram">
<h2><strong>Schematic Diagram</strong><a class="headerlink" href="#schematic-diagram" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/image202.png"><img alt="_images/image202.png" class="align-center" src="_images/image202.png" style="width: 2.97569in; height: 2.82778in;" /></a>
</section>
<section id="code">
<h2><strong>Code</strong><a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<p>The codes use the <a class="reference external" href="https://github.com/sunfounder/sunfounder_vincent_kit_for_arduino/tree/master/library">MPR121_JM. h library</a>. .
Turn to <a class="reference internal" href="part_4_appendix.html#add-libraries"><span class="std std-ref">4.1 Add Libraries</span></a> for information on how to import Libraries.</p>
<iframe src=https://create.arduino.cc/editor/sunfounder01/92bbae94-2807-4207-b0ac-393d89189517/preview?embed style="height:510px;width:100%;margin:10px 0" frameborder=0></iframe><p>After uploading the codes to the Mega2560 board, the touch state of pins
of MPR121 「1」and「0」will be recorded in a 12 - bit boolean type of
array that will be printed on the serial monitor.</p>
</section>
<section id="code-analysis">
<h2><strong>Code Analysis</strong><a class="headerlink" href="#code-analysis" title="Permalink to this headline">¶</a></h2>
<p>The function of the module is included in the library MPR121_JM.h.</p>
<div class="highlight-arduino notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;MPR121_JM.h&gt;</span><span class="cp"></span>
</pre></div>
</div>
</section>
<section id="library-functions">
<h2><strong>Library Functions：</strong><a class="headerlink" href="#library-functions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-arduino notranslate"><div class="highlight"><pre><span></span><span class="n">MPR121</span><span class="p">(</span><span class="kr">int</span> <span class="n">irqpin</span><span class="p">,</span><span class="kr">uint8_t</span> <span class="n">touThresh</span><span class="p">,</span><span class="kr">uint8_t</span> <span class="n">relThresh</span><span class="p">)</span>
</pre></div>
</div>
<p>Creates a new instance of the MPR121.</p>
<p>irqpin: the interrupt request pin.</p>
<p>touThresh: Touch threshold，the electrode is recognized as a threshold
of the 「Touch」 state.</p>
<p>relThresh: Release threshold，the electrode is recognized as a threshold
of the 「Release」 state.</p>
<p>The range of the electrode data value is 0~255. For typical touch
application, the threshold value can be in range 0x05~0x30 for example.
The smaller the value, the more sensitive it is. The setting of the
threshold is depended on the actual application.Typically the touch
threshold is a little bigger than the release threshold to touch
debounce and hysteresis.</p>
<div class="highlight-arduino notranslate"><div class="highlight"><pre><span></span><span class="kr">void</span> <span class="n">mpr121_setup</span><span class="p">()</span>
</pre></div>
</div>
<p>Setup MPR121 module.</p>
<div class="highlight-arduino notranslate"><div class="highlight"><pre><span></span><span class="kr">bool</span> <span class="n">checkInterrupt</span><span class="p">()</span>
</pre></div>
</div>
<p>Make interrupt judgment, when the electrode state changes, the function
returns a Boolean value 「0」.</p>
<div class="highlight-arduino notranslate"><div class="highlight"><pre><span></span><span class="kr">uint16_t</span> <span class="n">readTouchInputs</span><span class="p">()</span>
</pre></div>
</div>
<p>The touch state of the electrode produces a Boolean value. The function
accumulates the Boolean values generated by all the electrodes in
sequence into a 12-bit binary number as the return value. If the first
and eleventh electrodes are touched, 「100000000010」 is returned.</p>
</section>
<section id="phenomenon-picture">
<h2><strong>Phenomenon Picture</strong><a class="headerlink" href="#phenomenon-picture" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/image203.jpeg"><img alt="2.24" class="align-center" src="_images/image203.jpeg" style="width: 5.85903in; height: 5.45833in;" /></a>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="2.25_rotary_encoder_module.html" class="btn btn-neutral float-right" title="2.25 Rotary Encoder Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="2.23_joystick_module.html" class="btn btn-neutral float-left" title="2.23 Joystick Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, SunFounder.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>